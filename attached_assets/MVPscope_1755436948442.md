MVP scope (ship in days)
• Auth & onboarding: Supabase email magic-link.
• Import products: CSV upload (title, description, tags, URL, price). Optional “paste URL list” to prefill via light scraper API later.
• SEO Optimizer: Keyword field → score titles/descriptions against rules (length, keyword placement, readability) + AI rewrite (OpenAI) with 3 variants. “Publish” = store optimized versions.
• Keyword & Rank Tracker: Track keywords per product. Fetch SERP position daily via SerpAPI (or stub + manual refresh). Trend line chart.
• Social Content Generator: One-click generate 5 pins, 3 IG captions, 3 FB posts per product (templated + AI). Export CSV or copy-to-clipboard. Optional Buffer/Hypefury webhook later.
• Dashboard & Analytics: Per-product views: current rank, last change, SEO score, social posts generated. Import TPT sales CSV → revenue, units, conversion per product (simple charts).
• Settings & Billing: Stripe Checkout link + plan gating: Free (3 products tracked), Pro (unlimited, rank cron, AI).

Key decisions
• Stack: Static site (HTML/CSS/JS via Vite) + Supabase (Auth, Postgres, Storage, RLS) + Edge Functions for cron/rank fetch. Charts via Chart.js. UI via Tailwind.
• No TPT private API: rely on CSV import + optional scraping adapter later.
• Background jobs: Supabase Scheduled Functions (daily rank pull).
• Data privacy: Only store product meta + user-provided keywords; no TPT credentials.

Data model (tables)
• profiles(id, email, plan, created_at)
• products(id, user_id, title, description, tags[], tpt_url, price, seo_title, seo_description, created_at, updated_at)
• keywords(id, product_id, phrase, country, device, created_at)
• ranks(id, keyword_id, position, url_found, fetched_at)
• social_posts(id, product_id, network, content, status, created_at)
• sales(id, product_id, date, units, revenue, views) // from CSV import
• events(id, user_id, type, meta, created_at) // audit logs

Pages
• Landing → Signup
• Dashboard (cards: products, tracked keywords, alerts)
• Product detail (edit, SEO score, suggestions, publish)
• Rank tracker (table + sparkline)
• Social content (generate, copy/export)
• Sales analytics (upload CSV, charts)
• Settings (billing, API keys)

⸻

Replit prompt (copy-paste)

Goal: Generate a production-ready repo I can later convert to pure HTML/CSS/JS. Use Vite + vanilla JS, Tailwind, and Supabase JS client (no framework, no server). Include a /supabase folder with Edge Functions code for rank fetching + scheduled cron. Use OpenAI calls from the client but abstract behind a “provider” that can be swapped to Edge later.

Deliverables
• Clean UI matching attached flow: Signup → Connect (skip for now) → Import → Dashboard → SEO → Rank Tracker → Social → Analytics → Settings.
• Mock data + real Supabase integration behind env placeholders.
• Minimal dependencies, no tests, no TypeScript required.
• Clear comments and TODOs where server-side would be better.

Repo structure

/public
/icons
/index.html
/src/
main.js
supa.js // init Supabase (env-driven)
router.js // hash-based router (#/route)
ui/ // components (cards, tables, modals, toasts)
pages/
landing.js
auth.js // magic link auth
dashboard.js
products.js // list + add/edit
product_detail.js // SEO + social on tabs
rank_tracker.js
social.js
analytics.js // sales CSV upload + charts
settings.js
services/
seo.js // scoring + rewrite (calls aiProvider)
ranks.js // get/set keywords, fetch positions
social_gen.js // templated content generator
sales.js // CSV parse, map to table schema
aiProvider.js // wrapper for OpenAI (env key) with stubs
serpProvider.js // SerpAPI fetch; fallback to stub
styles.css
/supabase/
functions/
fetch_ranks/index.ts // Edge Function: given userId -> update ranks
policies.sql // RLS policies
schema.sql // tables + indexes
/README.md
/.env.example

Environment variables
• VITE_SUPABASE_URL=
• VITE_SUPABASE_ANON_KEY=
• VITE_OPENAI_API_KEY= // used in aiProvider; safe to swap to Edge later
• VITE_SERPAPI_KEY= // for serpProvider
• (optional) VITE_BUFFER_WEBHOOK_URL=

Routing
• Use a tiny hash router: #/, #/login, #/dashboard, #/product/:id, #/ranks, #/social, #/analytics, #/settings.

UI
• Tailwind, responsive, clean cards, table with sticky headers, modal for CSV import, toasts for success/error.
• Dashboard tiles: “Products”, “Tracked Keywords”, “Avg Rank Δ7”, “Revenue (CSV)”.
• Product detail tabs: SEO, Keywords, Social.

Functional requirements 1. Auth
• Email magic-link with Supabase.
• Guard routes; store session in memory + localStorage. 2. Import products
• CSV upload (sample provided). Map columns to fields with a small “column mapper” UI. Save to products.
• Secondary option: paste list of product URLs → create placeholder rows. 3. SEO Optimizer
• Textareas for title/description. Score function:
• Title length 50–70 chars; keyword present; no punctuation spam; clarity heuristic.
• Description 120–300 words; keyword density 1–2%; readability (avg sentence < 22 words).
• Return 0–100 score + checklist.
• Rewrite button → aiProvider.rewrite({style:'SEO-optimized TPT', constraints}) → 3 variants.
• Publish persists seo_title, seo_description on products. 4. Keyword & Rank Tracker
• Add keyword (phrase, country, device). Store in keywords.
• Fetch now button calls serpProvider.fetchPosition(phrase, product.tpt_url); store to ranks.
• Table shows latest pos + sparkline from last 14 entries.
• /supabase/functions/fetch_ranks supports batch daily update for all users.
• Provide stub mode (no API keys) that returns random plausible positions to demo. 5. Social Content Generator
• Templates per network → interpolate product fields + keyword.
• “Generate 10” -> list with copy buttons + “Export CSV”.
• If VITE_BUFFER_WEBHOOK_URL exists, POST payload to queue (demo only). 6. Analytics
• Upload TPT Sales CSV (user exports from TPT). Parse with PapaParse.
• Map product_id by matching title or manual picker.
• Charts: Revenue over time; Units; Conversion = units / views (if available). 7. Settings & Billing
• Show plan (Free/Pro). Stripe link placeholder + gating logic (e.g., track up to 3 products on Free).
• Input fields for API keys saved in profiles (encrypted at rest by Supabase). 8. Edge Functions & Cron
• fetch_ranks: accept JWT, scope to user, iterate keywords, call SerpAPI, upsert into ranks.
• Add README with instructions to create a daily schedule in Supabase. 9. Security (RLS)
• Enable RLS. Every table has user_id and policy:
• auth.uid() = user_id for select/insert/update/delete.
• Service role keys never used client-side; only anon key.

Sample CSVs (include in /public/samples)
• products_sample.csv:

    title,description,tags,tpt_url,price

Algebra Task Cards,"40 printable cards covering linear equations",math;algebra,https://www.teacherspayteachers.com/Product/12345,6.99

    •	sales_sample.csv:
    date,product_title,units,revenue,views

2025-08-01,Algebra Task Cards,12,83.88,340

Nice-to-haves (scaffold only)
• “Competitor compare” table: input competitor URL → store; no fetch yet.
• “Change impact” panel: correlate SEO publish dates with rank deltas (placeholder logic).

Success criteria
• Runs locally with npm i && npm run dev.
• Works in demo mode without API keys (random rank generator + mock AI).
• Clear README: how to create Supabase project, import schema.sql, apply policies.sql, set envs, deploy Edge Function, set schedule.
• Easy to later convert to static HTML/CSS/JS by exporting built assets. All network calls happen via Supabase/HTTP.
